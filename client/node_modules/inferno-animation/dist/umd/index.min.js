(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports,require("inferno"),require("inferno-create-element")):"function"==typeof define&&define.amd?define(["exports","inferno","inferno-create-element"],b):b(a.InfernoAnimation={},a.Inferno,a.infernoCreateElement)})(this,function(a,b,c){"use strict";function d(a){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},d(a)}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function g(a,b,c){return b&&f(a.prototype,b),c&&f(a,c),a}function h(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function i(a){for(var b=1;b<arguments.length;b++){var c=null==arguments[b]?{}:arguments[b],d=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){h(a,b,c[b])})}return a}function j(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&l(a,b)}function k(a){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},k(a)}function l(a,b){return l=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a},l(a,b)}function m(a,b){if(null==a)return{};var c,d,e={},f=Object.keys(a);for(d=0;d<f.length;d++)c=f[d],0<=b.indexOf(c)||(e[c]=a[c]);return e}function n(a,b){if(null==a)return{};var c,d,e=m(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],!(0<=b.indexOf(c))&&Object.prototype.propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}function o(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function p(a,b){return b&&("object"==typeof b||"function"==typeof b)?b:o(a)}function q(a,b){if(b)for(var c=b.split(" "),d=0;d<c.length;d++)a.classList.add(c[d])}function r(a,b){if(b)for(var c=b.split(" "),d=0;d<c.length;d++)a.classList.remove(c[d])}function s(){document.body.clientHeight}function t(a,b){var c=a.style.display;return c!==b&&(a.style.display=b),c}function u(a){a.style||a.removeAttribute("style")}function v(a){var b=a.style.display,c="none"===window.getComputedStyle(a).getPropertyValue("display");c&&(a.style.display="block");var d=a.getBoundingClientRect();return c&&(a.style.display=b,u(a)),{width:d.width,height:d.height}}function w(a,b,c){a.style.width=b+"px",a.style.height=c+"px"}function x(a){a.style.width=a.style.height=""}function y(a){return a.closest&&a.closest(".InfernoAnimation--noAnim")}function z(){for(var a,b=arguments,c=0,d=0,e=function(a){var e=b[a];if(!e)return"continue";var f=window.getComputedStyle(e),g=f.getPropertyValue("transition-duration").split(","),h=f.getPropertyValue("transition-delay").split(","),i=f.getPropertyValue("transition-property").split(",").map(function(a){return a.trim()});i.forEach(function(a){if("-"===a[0]){var b=a.split("-").splice(2).join("-");0<=i.indexOf(b)&&c--}});var j=g.map(function(a,b){return parseFloat(a)+parseFloat(h[b])}).reduce(function(a,b){return a>b?a:b},0);c+=g.length,j>d&&(d=j)},f=0;f<arguments.length;f++)a=e(f),"continue"===a;return{nrofTransitions:c,maxDuration:d}}function A(a,b){function c(e){if(e){for(var g=!1,j=0;j<a.length;j++)if(e.target===a[j]){g=!0;break}if(!g)return}h||void 0!==e&&0<--f||(h=!0,d.classList.remove("InfernoAnimation-active"),d.removeEventListener("transitionend",c,!1),b&&b())}Array.isArray(a)||(a=[a]);var d=a[0];d.classList.add("InfernoAnimation-active");var e=z.apply(this,a),f=e.nrofTransitions,g=e.maxDuration,h=!1;d.addEventListener("transitionend",c,!1),window.debugAnimations||setTimeout(c,Math.round(1e3*g)+100)}function B(a){var b=a.el,d=a.tag,e=a.children,f=n(a,["el","tag","children"]);return c.createElement(d||b||"div",f,e)}function C(a){return a&&a.nodeType?a:!a||a.$UN?null:a.$LI?b.findDOMfromVNode(a.$LI,!0):a.flags?b.findDOMfromVNode(a,!0):null}function D(a){var b=a.parentNode;b.classList.add("InfernoAnimation--getSize"),s(b);var c=v(b);return b.classList.remove("InfernoAnimation--getSize"),c}var E=function(a,b,c){if(!y(a)){var e={};"object"===d(b)?e=b:(e.start=b+"-leave",e.active=b+"-leave-active",e.end=b+"-leave-end");var f=a.cloneNode(!0),g=v(a),h=g.width,i=g.height;w(f,h,i),q(f,e.start),t(a,"none !important"),a.insertAdjacentElement("beforebegin",f),A(f,function(){c&&c(f),f.remove()}),q(f,e.active),setTimeout(function(){q(f,e.end),r(f,e.start),x(f)},5)}},F=function(a,b,c){if(!y(a)){var e={};"object"===d(b)?e=b:(e.start=b+"-enter",e.active=b+"-enter-active",e.end=b+"-enter-end");var f=v(a),g=f.width,h=f.height;q(a,e.start),s(),A([a,a.children[0]],function(){x(a),r(a,e.active),r(a,e.end),c&&c(a)}),q(a,e.active),setTimeout(function(){w(a,g,h),r(a,e.start),q(a,e.end)},5)}},G=function(a,b,c,d){y(a)||(w(a,c.width,c.height),s(a),A(a,function(){x(a),a.classList.remove(b+"-cross-fade-active")}),a.classList.add(b+"-cross-fade-active"),setTimeout(function(){w(a,d.width,d.height)},5))},H=function(a){function b(a){var c;return e(this,b),c=p(this,k(b).call(this,a)),c.state={active:!1},c.setTargetSize=c.setTargetSize.bind(o(o(c))),c.setSourceSize=c.setSourceSize.bind(o(o(c))),c._animationCheck=c._animationCheck.bind(o(o(c))),c}return j(b,a),g(b,[{key:"_animationCheck",value:function(){this.state.active&&this.targetSize&&this.sourceSize&&C(this)&&(G(C(this),this.props.prefix,this.sourceSize,this.targetSize),this.targetSize=this.sourceSize=void 0)}},{key:"componentDidMount",value:function(){var a=this;setTimeout(function(){a.targetSize=a.sourceSize=void 0,a.setState({active:!0})},10)}},{key:"setTargetSize",value:function(a){this.targetSize=D(a),this._animationCheck()}},{key:"setSourceSize",value:function(a){this.sourceSize=D(a),this._animationCheck()}},{key:"render",value:function(){var a=this,b={};this.props.className?b.className=this.props.className+(this.state.active?"":" InfernoAnimation--noAnim"):!this.state.active&&(b.className="InfernoAnimation--noAnim");var d=Array.isArray(this.props.children)?this.props.children:[this.props.children],e=d.map(function(b){return c.createElement(I,{onEnter:a.setTargetSize,onLeave:a.setSourceSize,key:b&&b.key,prefix:a.props.prefix},b)});return c.createElement(this.props.el||this.props.tag||"div",b,e)}}]),b}(b.Component),I=function(a){function c(){return e(this,c),p(this,k(c).apply(this,arguments))}return j(c,a),g(c,[{key:"componentDidMount",value:function(){var a=this,b=C(this);this.props.onEnter(b),setTimeout(function(){return F(b,a.props.prefix)})}},{key:"componentWillUnmount",value:function(){var a=this,b=C(this);this.props.onLeave(b),setTimeout(function(){return E(b,a.props.prefix)})}},{key:"render",value:function(){return b.createVNode(1,"div","CrossFadeItem",this.props.children,0)}}]),c}(b.Component);a.utils={addClassName:q,animationIsRunningOnParent:y,removeClassName:r,registerTransitionListener:A,forceReflow:s,clearDimensions:x,getDimensions:v,setDimensions:w,setDisplay:t},a.Animated=function(a){var c=a.prefix,d=a.onDidEnter,e=a.onDidLeave,f=n(a,["prefix","onDidEnter","onDidLeave"]);return b.normalizeProps(b.createComponentVNode(2,B,i({},f),null,{onComponentDidMount:function(a){return F(a,c,d)},onComponentWillUnmount:function(a){return E(a,c,e)}}))},a.CrossFade=H,a.animateOnRemove=E,a.animateOnAdd=F,Object.defineProperty(a,"__esModule",{value:!0})});
//# sourceMappingURL=index.min.js.map
