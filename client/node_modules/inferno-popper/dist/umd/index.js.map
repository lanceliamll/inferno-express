{"version":3,"file":"index.js","sources":["../../src/Manager.js","../../src/Target.js","../../src/Popper.js","../../src/Arrow.js","../../node_modules/inferno-shared/dist/index.esm.js","../../src/compat.js","../../src/Travel.js"],"sourcesContent":["import { Component } from 'inferno'\nimport { createElement } from 'inferno-create-element'\n\n\nclass Manager extends Component {\n\n  constructor (props) {\n    super(props)\n    \n    this._setTargetNode = (node) => {\n      this._targetNode = node\n    }\n  \n    this._getTargetNode = () => {\n      return this._targetNode\n    }  \n  }\n\n  getChildContext() {\n    return {\n      popperManager: {\n        setTargetNode: this._setTargetNode,\n        getTargetNode: this._getTargetNode,\n      },\n    }\n  }\n\n  render() {\n    const { \n      tag: Tag,\n      children,\n      ...restProps\n    } = this.props\n\n    if (Tag !== false) {\n      return createElement(Tag || 'div', restProps, children)\n    } else {\n      return children\n    }\n  }\n}\n\nexport default Manager\n","import { Component } from 'inferno'\nimport { createElement } from 'inferno-create-element'\n\nconst Target = (props, context) => {\n  const { component = 'div', innerRef, children, ...restProps } = props\n  const { popperManager } = context\n  const targetRef = node => {\n    popperManager.setTargetNode(node)\n    if (typeof innerRef === 'function') {\n      innerRef(node)\n    }\n  }\n\n  if (typeof children === 'function') {\n    const targetProps = { ref: targetRef }\n    return children({ targetProps, restProps })\n  }\n\n  const componentProps = {\n    ...restProps,\n  }\n\n  if (typeof component === 'string') {\n    componentProps.ref = targetRef\n  } else {\n    componentProps.innerRef = targetRef\n  }\n\n  return createElement(component, componentProps, children)\n}\n\nexport default Target\n","import { Component } from 'inferno'\nimport { createElement } from 'inferno-create-element'\nimport PopperJS from 'popper.js'\n\nexport const placements = PopperJS.placements\n\nconst defaultProps = {\n  component: 'div',\n  placement: 'bottom',\n  eventsEnabled: true,\n  positionFixed: false,\n  modifiers: {},\n}\n\nclass Popper extends Component {\n\n  state = {}\n\n  getChildContext() {\n    return {\n      popper: {\n        setArrowNode: this._setArrowNode.bind(this),\n        getArrowStyle: this._getArrowStyle.bind(this),\n      },\n    }\n  }\n\n  componentDidUpdate(lastProps) {\n    if (\n      lastProps.placement !== this.props.placement ||\n      lastProps.eventsEnabled !== this.props.eventsEnabled ||\n      lastProps.target !== this.props.target\n    ) {\n      this._destroyPopper()\n      this._createPopper()\n    }\n\n    if (lastProps.children !== this.props.children) {\n      this._popper.scheduleUpdate()\n    }\n  }\n\n  componentWillUnmount() {\n    this._destroyPopper()\n  }\n\n  _setArrowNode (node) {\n    this._arrowNode = node\n  }\n\n  _getTargetNode () {\n    if (this.props.target) {\n      return this.props.target\n    } else if (\n      !this.context.popperManager ||\n      !this.context.popperManager.getTargetNode()\n    ) {\n      throw new Error(\n        'Target missing. Popper must be given a target from the Popper Manager, or as a prop.',\n      )\n    }\n    return this.context.popperManager.getTargetNode()\n  }\n\n  _getOffsets (data) {\n    return Object.keys(data.offsets).map(key => data.offsets[key])\n  }\n\n  _isDataDirty (data) {\n    if (this.state.data) {\n      return (\n        JSON.stringify(this._getOffsets(this.state.data)) !==\n        JSON.stringify(this._getOffsets(data))\n      )\n    } else {\n      return true\n    }\n  }\n\n  _updateStateModifier = {\n    enabled: true,\n    order: 900,\n    fn: data => {\n      if (this._isDataDirty(data)) {\n        this.setState({ data })\n      }\n      return data\n    }\n  }\n\n  _createPopper () {\n    const { placement, eventsEnabled, positionFixed } = this.props\n    const modifiers = {\n      ...this.props.modifiers,\n      applyStyle: { enabled: false },\n      updateState: this._updateStateModifier,\n    }\n\n    if (this._arrowNode) {\n      modifiers.arrow = {\n        ...(this.props.modifiers.arrow || {}),\n        element: this._arrowNode,\n      }\n    }\n\n    this._popper = new PopperJS(this._getTargetNode(), this._popperNode, {\n      placement,\n      positionFixed,\n      eventsEnabled,\n      modifiers,\n    })\n    \n    // TODO: look into setTimeout scheduleUpdate call, without it, the popper will not position properly on creation\n    setTimeout(() => this._scheduleUpdate())\n  }\n\n  _destroyPopper() {\n    if (this._popper) {\n      this._popper.destroy()\n    }\n  }\n\n  _getPopperStyle() {\n    const { data } = this.state\n\n    if (!this._popper || !data) {\n      return {\n        position: 'absolute',\n        pointerEvents: 'none',\n        opacity: 0,\n      }\n    }\n\n    return {\n      position: data.offsets.popper.position,\n      ...data.styles,\n    }\n  }\n\n  _getPopperPlacement() {\n    return this.state.data ? this.state.data.placement : undefined\n  }\n\n  _getPopperHide () {\n    return !!this.state.data && this.state.data.hide ? '' : undefined\n  }\n\n  _getArrowStyle() {\n    if (!this.state.data || !this.state.data.offsets.arrow) {\n      return {}\n    } else {\n      const { top, left } = this.state.data.offsets.arrow\n      return { top, left }\n    }\n  }\n\n  _handlePopperRef = node => {\n    this._popperNode = node\n    if (node) {\n      this._createPopper()\n    } else {\n      this._destroyPopper()\n    }\n    if (this.props.innerRef) {\n      this.props.innerRef(node)\n    }\n  }\n\n  _scheduleUpdate () {\n    this._popper && this._popper.scheduleUpdate()\n  }\n\n  render() {\n    let {\n      component,\n      innerRef,\n      placement,\n      eventsEnabled,\n      positionFixed,\n      modifiers,\n      children,\n      ...restProps\n    } = this.props\n\n    // Default props\n    component = component || 'div'\n    placement = placement || 'bottom'\n    eventsEnabled === undefined ? true : eventsEnabled\n    modifiers = modifiers || {}\n\n    const popperStyle = this._getPopperStyle()\n    const popperPlacement = this._getPopperPlacement()\n    const popperHide = this._getPopperHide()\n\n    if (typeof children === 'function') {\n      const popperProps = {\n        ref: this._handlePopperRef,\n        style: popperStyle,\n        'data-placement': popperPlacement,\n        'data-x-out-of-boundaries': popperHide,\n      }\n      return children({\n        popperProps,\n        restProps,\n        scheduleUpdate: this._scheduleUpdate,\n      })\n    }\n\n    const componentProps = {\n      ...restProps,\n      style: {\n        ...restProps.style,\n        ...popperStyle,\n      },\n      'data-placement': popperPlacement,\n      'data-x-out-of-boundaries': popperHide,\n    }\n\n    if (typeof component === 'string') {\n      componentProps.ref = this._handlePopperRef\n    } else {\n      componentProps.innerRef = this._handlePopperRef\n    }\n\n    return createElement(component, componentProps, children)\n  }\n}\n\nPopper.defaultProps = defaultProps\n\nexport default Popper\n","import { Component } from 'inferno'\nimport { createElement } from 'inferno-create-element'\n\nconst Arrow = (props, context) => {\n  const { component = 'span', innerRef, children, ...restProps } = props\n  const { popper } = context\n  const arrowRef = node => {\n    popper.setArrowNode(node)\n    if (typeof innerRef === 'function') {\n      innerRef(node)\n    }\n  }\n  const arrowStyle = popper.getArrowStyle()\n\n  if (typeof children === 'function') {\n    const arrowProps = {\n      ref: arrowRef,\n      style: arrowStyle,\n    }\n    return children({ arrowProps, restProps })\n  }\n\n  const componentProps = {\n    ...restProps,\n    style: {\n      ...arrowStyle,\n      ...restProps.style,\n    },\n  }\n\n  if (typeof component === 'string') {\n    componentProps.ref = arrowRef\n  } else {\n    componentProps.innerRef = arrowRef\n  }\n\n  return createElement(component, componentProps, children)\n}\n\nexport default Arrow\n","var ERROR_MSG = 'a runtime error occured! Use Inferno in development environment to find the error.';\nvar isArray = Array.isArray;\nfunction isStringOrNumber(o) {\n    var type = typeof o;\n    return type === 'string' || type === 'number';\n}\nfunction isNullOrUndef(o) {\n    return isUndefined(o) || isNull(o);\n}\nfunction isInvalid(o) {\n    return isNull(o) || o === false || isTrue(o) || isUndefined(o);\n}\nfunction isFunction(o) {\n    return typeof o === 'function';\n}\nfunction isString(o) {\n    return typeof o === 'string';\n}\nfunction isNumber(o) {\n    return typeof o === 'number';\n}\nfunction isNull(o) {\n    return o === null;\n}\nfunction isTrue(o) {\n    return o === true;\n}\nfunction isUndefined(o) {\n    return o === void 0;\n}\nfunction isObject(o) {\n    return typeof o === 'object';\n}\nfunction throwError(message) {\n    if (!message) {\n        message = ERROR_MSG;\n    }\n    throw new Error((\"Inferno Error: \" + message));\n}\nfunction warning(message) {\n    // tslint:disable-next-line:no-console\n    console.error(message);\n}\nfunction combineFrom(first, second) {\n    var out = {};\n    if (first) {\n        for (var key in first) {\n            out[key] = first[key];\n        }\n    }\n    if (second) {\n        for (var key$1 in second) {\n            out[key$1] = second[key$1];\n        }\n    }\n    return out;\n}\n\nexport { ERROR_MSG, isArray, isStringOrNumber, isNullOrUndef, isInvalid, isFunction, isString, isNumber, isNull, isTrue, isUndefined, isObject, throwError, warning, combineFrom };\n","import {\n  isArray,\n  isNullOrUndef\n} from 'inferno-shared'\n\n/* COMPATIBILITY */\nconst ARR = [];\n\nexport const Children = {\n  only: function (children) {\n    children = Children.toArray(children);\n    if (children.length !== 1) {\n      throw new Error(\"Children.only() expects only one child.\");\n    }\n    return children[0];\n  },\n\n  toArray: function (children) {\n    if (isNullOrUndef(children)) {\n      return [];\n    }\n    // We need to flatten arrays here,\n    // because React does it also and application level code might depend on that behavior\n    if (isArray(children)) {\n      const result = [];\n\n      flatten(children, result);\n\n      return result;\n    }\n    return ARR.concat(children);\n  }\n};\n\n/* /COMPATIBILITY */\n","import { Component, createPortal } from 'inferno'\nimport { Children } from './compat'\n\nconst noop = () => null\n\nclass Travel extends Component {\n\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      portalNode: null,\n      portalInstance: null\n    }\n  }\n\n  componentDidMount() {\n    this._setupPortal()\n  }\n\n  componentDidUpdate() {\n    this._updatePortal()\n  }\n\n  componentWillUnmount() {\n    this._destroyPortal()\n  }\n\n  _getRenderToNode() {\n    const { renderTo } = this.props\n    if (typeof renderTo === 'string') {\n      return document.querySelector(renderTo)\n    } else {\n      return renderTo || document.body\n    }\n  }\n\n  _getComponent() {\n    if (this.props.useArray) {\n      return Children.toArray(this.props.children)[1]\n    } else {\n      return Children.only(this.props.children)\n    }\n  }\n\n  _setupPortal() {\n    let { renderTag, onMount } = this.props\n\n    // Default props\n    renderTag = renderTag || 'div'\n    onMount = onMount || noop\n\n    const renderToNode = this._getRenderToNode()\n\n    // create a node that we can stick our component in\n    const portalNode = document.createElement(renderTag)\n\n    // append node to the render node\n    renderToNode.appendChild(portalNode)\n\n    // store the instance passed back to allow work to be done on it\n    const portalInstance = typeof onMount === 'function'\n      ? onMount(portalNode)\n      : portalNode\n\n    this.setState({\n      portalNode,\n      portalInstance\n    })\n  }\n\n  _updatePortal() {\n    let { id, className, style, onUpdate } = this.props\n\n    // Default props\n    onUpdate = onUpdate || noop    \n\n    if (id) {\n      this._portalNode.id = id\n    }\n\n    if (className) {\n      this._portalNode.className = className\n    }\n\n    if (style) {\n      Object.keys(style).forEach(key => {\n        this._portalNode.style[key] = style[key]\n      })\n    }\n\n    if (typeof onUpdate === 'function') {\n      this._portalInstance = onUpdate(this._portalInstance)\n    }\n  }\n\n  _destroyPortal() {\n    this.state.portalNode.parentNode.removeChild(this._portalNode)\n    this.setState({\n      portalNode: null,\n      portalInstance: null\n    })\n  }\n\n  render() {\n\n    return this.state.portalNode ? createPortal(this._getComponent(), this.state.portalNode) : null;\n  }\n}\n\nexport default Travel"],"names":["Manager","props","_setTargetNode","node","_targetNode","_getTargetNode","popperManager","setTargetNode","getTargetNode","Tag","tag","children","restProps","createElement","Component","Target","context","component","innerRef","targetRef","targetProps","ref","componentProps","placements","PopperJS","defaultProps","placement","eventsEnabled","positionFixed","modifiers","Popper","enabled","order","fn","data","_isDataDirty","setState","_popperNode","_createPopper","_destroyPopper","popper","setArrowNode","_setArrowNode","bind","getArrowStyle","_getArrowStyle","lastProps","target","_popper","scheduleUpdate","_arrowNode","Error","Object","keys","offsets","map","key","state","JSON","stringify","_getOffsets","applyStyle","updateState","_updateStateModifier","arrow","element","setTimeout","_scheduleUpdate","destroy","position","pointerEvents","opacity","styles","undefined","hide","top","left","popperStyle","_getPopperStyle","popperPlacement","_getPopperPlacement","popperHide","_getPopperHide","popperProps","_handlePopperRef","style","Arrow","arrowRef","arrowStyle","arrowProps","isArray","Array","isNullOrUndef","o","isUndefined","isNull","ARR","Children","only","toArray","length","result","flatten","concat","noop","Travel","portalNode","portalInstance","_setupPortal","_updatePortal","_destroyPortal","renderTo","document","querySelector","body","useArray","renderTag","onMount","renderToNode","_getRenderToNode","appendChild","id","className","onUpdate","_portalNode","forEach","_portalInstance","parentNode","removeChild","createPortal","_getComponent"],"mappings":"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"}