(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports,require("inferno"),require("inferno-create-element"),require("popper.js")):"function"==typeof define&&define.amd?define(["exports","inferno","inferno-create-element","popper.js"],b):b(a.InfernoPopper={},a.Inferno,a.infernoCreateElement,a.Popper)})(this,function(a,b,c,d){"use strict";function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function g(a,b,c){return b&&f(a.prototype,b),c&&f(a,c),a}function h(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function i(a){for(var b=1;b<arguments.length;b++){var c=null==arguments[b]?{}:arguments[b],d=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){h(a,b,c[b])})}return a}function j(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&l(a,b)}function k(a){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},k(a)}function l(a,b){return l=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a},l(a,b)}function m(a,b){if(null==a)return{};var c,d,e={},f=Object.keys(a);for(d=0;d<f.length;d++)c=f[d],0<=b.indexOf(c)||(e[c]=a[c]);return e}function n(a,b){if(null==a)return{};var c,d,e=m(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],!(0<=b.indexOf(c))&&Object.prototype.propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}function o(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function p(a,b){return b&&("object"==typeof b||"function"==typeof b)?b:o(a)}function q(a){return s(a)||r(a)}function r(a){return null===a}function s(a){return void 0===a}d=d&&d.hasOwnProperty("default")?d["default"]:d;var t=function(a){function b(a){var c;return e(this,b),c=p(this,k(b).call(this,a)),c._setTargetNode=function(a){c._targetNode=a},c._getTargetNode=function(){return c._targetNode},c}return j(b,a),g(b,[{key:"getChildContext",value:function(){return{popperManager:{setTargetNode:this._setTargetNode,getTargetNode:this._getTargetNode}}}},{key:"render",value:function(){var a=this.props,b=a.tag,d=a.children,e=n(a,["tag","children"]);return!1===b?d:c.createElement(b||"div",e,d)}}]),b}(b.Component),u=d.placements,v=function(a){function b(){var a,c;e(this,b);for(var d=arguments.length,f=Array(d),g=0;g<d;g++)f[g]=arguments[g];return c=p(this,(a=k(b)).call.apply(a,[this].concat(f))),h(o(o(c)),"state",{}),h(o(o(c)),"_updateStateModifier",{enabled:!0,order:900,fn:function(a){return c._isDataDirty(a)&&c.setState({data:a}),a}}),h(o(o(c)),"_handlePopperRef",function(a){c._popperNode=a,a?c._createPopper():c._destroyPopper(),c.props.innerRef&&c.props.innerRef(a)}),c}return j(b,a),g(b,[{key:"getChildContext",value:function(){return{popper:{setArrowNode:this._setArrowNode.bind(this),getArrowStyle:this._getArrowStyle.bind(this)}}}},{key:"componentDidUpdate",value:function(a){(a.placement!==this.props.placement||a.eventsEnabled!==this.props.eventsEnabled||a.target!==this.props.target)&&(this._destroyPopper(),this._createPopper()),a.children!==this.props.children&&this._popper.scheduleUpdate()}},{key:"componentWillUnmount",value:function(){this._destroyPopper()}},{key:"_setArrowNode",value:function(a){this._arrowNode=a}},{key:"_getTargetNode",value:function(){if(this.props.target)return this.props.target;if(!this.context.popperManager||!this.context.popperManager.getTargetNode())throw new Error("Target missing. Popper must be given a target from the Popper Manager, or as a prop.");return this.context.popperManager.getTargetNode()}},{key:"_getOffsets",value:function(a){return Object.keys(a.offsets).map(function(b){return a.offsets[b]})}},{key:"_isDataDirty",value:function(a){return!this.state.data||JSON.stringify(this._getOffsets(this.state.data))!==JSON.stringify(this._getOffsets(a))}},{key:"_createPopper",value:function(){var a=this,b=this.props,c=b.placement,e=b.eventsEnabled,f=b.positionFixed,g=i({},this.props.modifiers,{applyStyle:{enabled:!1},updateState:this._updateStateModifier});this._arrowNode&&(g.arrow=i({},this.props.modifiers.arrow||{},{element:this._arrowNode})),this._popper=new d(this._getTargetNode(),this._popperNode,{placement:c,positionFixed:f,eventsEnabled:e,modifiers:g}),setTimeout(function(){return a._scheduleUpdate()})}},{key:"_destroyPopper",value:function(){this._popper&&this._popper.destroy()}},{key:"_getPopperStyle",value:function(){var a=this.state.data;return this._popper&&a?i({position:a.offsets.popper.position},a.styles):{position:"absolute",pointerEvents:"none",opacity:0}}},{key:"_getPopperPlacement",value:function(){return this.state.data?this.state.data.placement:void 0}},{key:"_getPopperHide",value:function(){return!!this.state.data&&this.state.data.hide?"":void 0}},{key:"_getArrowStyle",value:function(){if(!this.state.data||!this.state.data.offsets.arrow)return{};var a=this.state.data.offsets.arrow,b=a.top,c=a.left;return{top:b,left:c}}},{key:"_scheduleUpdate",value:function(){this._popper&&this._popper.scheduleUpdate()}},{key:"render",value:function(){var a=this.props,b=a.component,d=a.innerRef,e=a.placement,f=a.eventsEnabled,g=a.positionFixed,h=a.modifiers,j=a.children,k=n(a,["component","innerRef","placement","eventsEnabled","positionFixed","modifiers","children"]);b=b||"div",e=e||"bottom",h=h||{};var l=this._getPopperStyle(),m=this._getPopperPlacement(),o=this._getPopperHide();if("function"==typeof j){var p={ref:this._handlePopperRef,style:l,"data-placement":m,"data-x-out-of-boundaries":o};return j({popperProps:p,restProps:k,scheduleUpdate:this._scheduleUpdate})}var q=i({},k,{style:i({},k.style,l),"data-placement":m,"data-x-out-of-boundaries":o});return"string"==typeof b?q.ref=this._handlePopperRef:q.innerRef=this._handlePopperRef,c.createElement(b,q,j)}}]),b}(b.Component);v.defaultProps={component:"div",placement:"bottom",eventsEnabled:!0,positionFixed:!1,modifiers:{}};var w=Array.isArray,x=[],y={only:function(a){if(a=y.toArray(a),1!==a.length)throw new Error("Children.only() expects only one child.");return a[0]},toArray:function(a){if(q(a))return[];if(w(a)){var b=[];return flatten(a,b),b}return x.concat(a)}},z=function(){return null},A=function(a){function c(a){var b;return e(this,c),b=p(this,k(c).call(this,a)),b.state={portalNode:null,portalInstance:null},b}return j(c,a),g(c,[{key:"componentDidMount",value:function(){this._setupPortal()}},{key:"componentDidUpdate",value:function(){this._updatePortal()}},{key:"componentWillUnmount",value:function(){this._destroyPortal()}},{key:"_getRenderToNode",value:function(){var a=this.props.renderTo;return"string"==typeof a?document.querySelector(a):a||document.body}},{key:"_getComponent",value:function(){return this.props.useArray?y.toArray(this.props.children)[1]:y.only(this.props.children)}},{key:"_setupPortal",value:function(){var a=this.props,b=a.renderTag,c=a.onMount;b=b||"div",c=c||z;var d=this._getRenderToNode(),e=document.createElement(b);d.appendChild(e);var f="function"==typeof c?c(e):e;this.setState({portalNode:e,portalInstance:f})}},{key:"_updatePortal",value:function(){var a=this,b=this.props,c=b.id,d=b.className,e=b.style,f=b.onUpdate;f=f||z,c&&(this._portalNode.id=c),d&&(this._portalNode.className=d),e&&Object.keys(e).forEach(function(b){a._portalNode.style[b]=e[b]}),"function"==typeof f&&(this._portalInstance=f(this._portalInstance))}},{key:"_destroyPortal",value:function(){this.state.portalNode.parentNode.removeChild(this._portalNode),this.setState({portalNode:null,portalInstance:null})}},{key:"render",value:function(){return this.state.portalNode?b.createPortal(this._getComponent(),this.state.portalNode):null}}]),c}(b.Component);a.Manager=t,a.Target=function(a,b){var d=a.component,e=void 0===d?"div":d,f=a.innerRef,g=a.children,h=n(a,["component","innerRef","children"]),j=b.popperManager,k=function(a){j.setTargetNode(a),"function"==typeof f&&f(a)};if("function"==typeof g){return g({targetProps:{ref:k},restProps:h})}var l=i({},h);return"string"==typeof e?l.ref=k:l.innerRef=k,c.createElement(e,l,g)},a.Popper=v,a.placements=u,a.Arrow=function(a,b){var d=a.component,e=void 0===d?"span":d,f=a.innerRef,g=a.children,h=n(a,["component","innerRef","children"]),j=b.popper,k=function(a){j.setArrowNode(a),"function"==typeof f&&f(a)},l=j.getArrowStyle();if("function"==typeof g){return g({arrowProps:{ref:k,style:l},restProps:h})}var m=i({},h,{style:i({},l,h.style)});return"string"==typeof e?m.ref=k:m.innerRef=k,c.createElement(e,m,g)},a.Travel=A,Object.defineProperty(a,"__esModule",{value:!0})});
//# sourceMappingURL=index.min.js.map
