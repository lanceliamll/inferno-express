{"version":3,"file":"index.js","sources":["../../src/Manager.js","../../src/Target.js","../../src/Popper.js","../../src/Arrow.js","../../node_modules/inferno-shared/dist/index.esm.js","../../src/compat.js","../../src/Travel.js"],"sourcesContent":["import { Component } from 'inferno'\nimport { createElement } from 'inferno-create-element'\n\n\nclass Manager extends Component {\n\n  constructor (props) {\n    super(props)\n    \n    this._setTargetNode = (node) => {\n      this._targetNode = node\n    }\n  \n    this._getTargetNode = () => {\n      return this._targetNode\n    }  \n  }\n\n  getChildContext() {\n    return {\n      popperManager: {\n        setTargetNode: this._setTargetNode,\n        getTargetNode: this._getTargetNode,\n      },\n    }\n  }\n\n  render() {\n    const { \n      tag: Tag,\n      children,\n      ...restProps\n    } = this.props\n\n    if (Tag !== false) {\n      return createElement(Tag || 'div', restProps, children)\n    } else {\n      return children\n    }\n  }\n}\n\nexport default Manager\n","import { Component } from 'inferno'\nimport { createElement } from 'inferno-create-element'\n\nconst Target = (props, context) => {\n  const { component = 'div', innerRef, children, ...restProps } = props\n  const { popperManager } = context\n  const targetRef = node => {\n    popperManager.setTargetNode(node)\n    if (typeof innerRef === 'function') {\n      innerRef(node)\n    }\n  }\n\n  if (typeof children === 'function') {\n    const targetProps = { ref: targetRef }\n    return children({ targetProps, restProps })\n  }\n\n  const componentProps = {\n    ...restProps,\n  }\n\n  if (typeof component === 'string') {\n    componentProps.ref = targetRef\n  } else {\n    componentProps.innerRef = targetRef\n  }\n\n  return createElement(component, componentProps, children)\n}\n\nexport default Target\n","import { Component } from 'inferno'\nimport { createElement } from 'inferno-create-element'\nimport PopperJS from 'popper.js'\n\nexport const placements = PopperJS.placements\n\nconst defaultProps = {\n  component: 'div',\n  placement: 'bottom',\n  eventsEnabled: true,\n  positionFixed: false,\n  modifiers: {},\n}\n\nclass Popper extends Component {\n\n  state = {}\n\n  getChildContext() {\n    return {\n      popper: {\n        setArrowNode: this._setArrowNode.bind(this),\n        getArrowStyle: this._getArrowStyle.bind(this),\n      },\n    }\n  }\n\n  componentDidUpdate(lastProps) {\n    if (\n      lastProps.placement !== this.props.placement ||\n      lastProps.eventsEnabled !== this.props.eventsEnabled ||\n      lastProps.target !== this.props.target\n    ) {\n      this._destroyPopper()\n      this._createPopper()\n    }\n\n    if (lastProps.children !== this.props.children) {\n      this._popper.scheduleUpdate()\n    }\n  }\n\n  componentWillUnmount() {\n    this._destroyPopper()\n  }\n\n  _setArrowNode (node) {\n    this._arrowNode = node\n  }\n\n  _getTargetNode () {\n    if (this.props.target) {\n      return this.props.target\n    } else if (\n      !this.context.popperManager ||\n      !this.context.popperManager.getTargetNode()\n    ) {\n      throw new Error(\n        'Target missing. Popper must be given a target from the Popper Manager, or as a prop.',\n      )\n    }\n    return this.context.popperManager.getTargetNode()\n  }\n\n  _getOffsets (data) {\n    return Object.keys(data.offsets).map(key => data.offsets[key])\n  }\n\n  _isDataDirty (data) {\n    if (this.state.data) {\n      return (\n        JSON.stringify(this._getOffsets(this.state.data)) !==\n        JSON.stringify(this._getOffsets(data))\n      )\n    } else {\n      return true\n    }\n  }\n\n  _updateStateModifier = {\n    enabled: true,\n    order: 900,\n    fn: data => {\n      if (this._isDataDirty(data)) {\n        this.setState({ data })\n      }\n      return data\n    }\n  }\n\n  _createPopper () {\n    const { placement, eventsEnabled, positionFixed } = this.props\n    const modifiers = {\n      ...this.props.modifiers,\n      applyStyle: { enabled: false },\n      updateState: this._updateStateModifier,\n    }\n\n    if (this._arrowNode) {\n      modifiers.arrow = {\n        ...(this.props.modifiers.arrow || {}),\n        element: this._arrowNode,\n      }\n    }\n\n    this._popper = new PopperJS(this._getTargetNode(), this._popperNode, {\n      placement,\n      positionFixed,\n      eventsEnabled,\n      modifiers,\n    })\n    \n    // TODO: look into setTimeout scheduleUpdate call, without it, the popper will not position properly on creation\n    setTimeout(() => this._scheduleUpdate())\n  }\n\n  _destroyPopper() {\n    if (this._popper) {\n      this._popper.destroy()\n    }\n  }\n\n  _getPopperStyle() {\n    const { data } = this.state\n\n    if (!this._popper || !data) {\n      return {\n        position: 'absolute',\n        pointerEvents: 'none',\n        opacity: 0,\n      }\n    }\n\n    return {\n      position: data.offsets.popper.position,\n      ...data.styles,\n    }\n  }\n\n  _getPopperPlacement() {\n    return this.state.data ? this.state.data.placement : undefined\n  }\n\n  _getPopperHide () {\n    return !!this.state.data && this.state.data.hide ? '' : undefined\n  }\n\n  _getArrowStyle() {\n    if (!this.state.data || !this.state.data.offsets.arrow) {\n      return {}\n    } else {\n      const { top, left } = this.state.data.offsets.arrow\n      return { top, left }\n    }\n  }\n\n  _handlePopperRef = node => {\n    this._popperNode = node\n    if (node) {\n      this._createPopper()\n    } else {\n      this._destroyPopper()\n    }\n    if (this.props.innerRef) {\n      this.props.innerRef(node)\n    }\n  }\n\n  _scheduleUpdate () {\n    this._popper && this._popper.scheduleUpdate()\n  }\n\n  render() {\n    let {\n      component,\n      innerRef,\n      placement,\n      eventsEnabled,\n      positionFixed,\n      modifiers,\n      children,\n      ...restProps\n    } = this.props\n\n    // Default props\n    component = component || 'div'\n    placement = placement || 'bottom'\n    eventsEnabled === undefined ? true : eventsEnabled\n    modifiers = modifiers || {}\n\n    const popperStyle = this._getPopperStyle()\n    const popperPlacement = this._getPopperPlacement()\n    const popperHide = this._getPopperHide()\n\n    if (typeof children === 'function') {\n      const popperProps = {\n        ref: this._handlePopperRef,\n        style: popperStyle,\n        'data-placement': popperPlacement,\n        'data-x-out-of-boundaries': popperHide,\n      }\n      return children({\n        popperProps,\n        restProps,\n        scheduleUpdate: this._scheduleUpdate,\n      })\n    }\n\n    const componentProps = {\n      ...restProps,\n      style: {\n        ...restProps.style,\n        ...popperStyle,\n      },\n      'data-placement': popperPlacement,\n      'data-x-out-of-boundaries': popperHide,\n    }\n\n    if (typeof component === 'string') {\n      componentProps.ref = this._handlePopperRef\n    } else {\n      componentProps.innerRef = this._handlePopperRef\n    }\n\n    return createElement(component, componentProps, children)\n  }\n}\n\nPopper.defaultProps = defaultProps\n\nexport default Popper\n","import { Component } from 'inferno'\nimport { createElement } from 'inferno-create-element'\n\nconst Arrow = (props, context) => {\n  const { component = 'span', innerRef, children, ...restProps } = props\n  const { popper } = context\n  const arrowRef = node => {\n    popper.setArrowNode(node)\n    if (typeof innerRef === 'function') {\n      innerRef(node)\n    }\n  }\n  const arrowStyle = popper.getArrowStyle()\n\n  if (typeof children === 'function') {\n    const arrowProps = {\n      ref: arrowRef,\n      style: arrowStyle,\n    }\n    return children({ arrowProps, restProps })\n  }\n\n  const componentProps = {\n    ...restProps,\n    style: {\n      ...arrowStyle,\n      ...restProps.style,\n    },\n  }\n\n  if (typeof component === 'string') {\n    componentProps.ref = arrowRef\n  } else {\n    componentProps.innerRef = arrowRef\n  }\n\n  return createElement(component, componentProps, children)\n}\n\nexport default Arrow\n","var ERROR_MSG = 'a runtime error occured! Use Inferno in development environment to find the error.';\nvar isArray = Array.isArray;\nfunction isStringOrNumber(o) {\n    var type = typeof o;\n    return type === 'string' || type === 'number';\n}\nfunction isNullOrUndef(o) {\n    return isUndefined(o) || isNull(o);\n}\nfunction isInvalid(o) {\n    return isNull(o) || o === false || isTrue(o) || isUndefined(o);\n}\nfunction isFunction(o) {\n    return typeof o === 'function';\n}\nfunction isString(o) {\n    return typeof o === 'string';\n}\nfunction isNumber(o) {\n    return typeof o === 'number';\n}\nfunction isNull(o) {\n    return o === null;\n}\nfunction isTrue(o) {\n    return o === true;\n}\nfunction isUndefined(o) {\n    return o === void 0;\n}\nfunction isObject(o) {\n    return typeof o === 'object';\n}\nfunction throwError(message) {\n    if (!message) {\n        message = ERROR_MSG;\n    }\n    throw new Error((\"Inferno Error: \" + message));\n}\nfunction warning(message) {\n    // tslint:disable-next-line:no-console\n    console.error(message);\n}\nfunction combineFrom(first, second) {\n    var out = {};\n    if (first) {\n        for (var key in first) {\n            out[key] = first[key];\n        }\n    }\n    if (second) {\n        for (var key$1 in second) {\n            out[key$1] = second[key$1];\n        }\n    }\n    return out;\n}\n\nexport { ERROR_MSG, isArray, isStringOrNumber, isNullOrUndef, isInvalid, isFunction, isString, isNumber, isNull, isTrue, isUndefined, isObject, throwError, warning, combineFrom };\n","import {\n  isArray,\n  isNullOrUndef\n} from 'inferno-shared'\n\n/* COMPATIBILITY */\nconst ARR = [];\n\nexport const Children = {\n  only: function (children) {\n    children = Children.toArray(children);\n    if (children.length !== 1) {\n      throw new Error(\"Children.only() expects only one child.\");\n    }\n    return children[0];\n  },\n\n  toArray: function (children) {\n    if (isNullOrUndef(children)) {\n      return [];\n    }\n    // We need to flatten arrays here,\n    // because React does it also and application level code might depend on that behavior\n    if (isArray(children)) {\n      const result = [];\n\n      flatten(children, result);\n\n      return result;\n    }\n    return ARR.concat(children);\n  }\n};\n\n/* /COMPATIBILITY */\n","import { Component, createPortal } from 'inferno'\nimport { Children } from './compat'\n\nconst noop = () => null\n\nclass Travel extends Component {\n\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      portalNode: null,\n      portalInstance: null\n    }\n  }\n\n  componentDidMount() {\n    this._setupPortal()\n  }\n\n  componentDidUpdate() {\n    this._updatePortal()\n  }\n\n  componentWillUnmount() {\n    this._destroyPortal()\n  }\n\n  _getRenderToNode() {\n    const { renderTo } = this.props\n    if (typeof renderTo === 'string') {\n      return document.querySelector(renderTo)\n    } else {\n      return renderTo || document.body\n    }\n  }\n\n  _getComponent() {\n    if (this.props.useArray) {\n      return Children.toArray(this.props.children)[1]\n    } else {\n      return Children.only(this.props.children)\n    }\n  }\n\n  _setupPortal() {\n    let { renderTag, onMount } = this.props\n\n    // Default props\n    renderTag = renderTag || 'div'\n    onMount = onMount || noop\n\n    const renderToNode = this._getRenderToNode()\n\n    // create a node that we can stick our component in\n    const portalNode = document.createElement(renderTag)\n\n    // append node to the render node\n    renderToNode.appendChild(portalNode)\n\n    // store the instance passed back to allow work to be done on it\n    const portalInstance = typeof onMount === 'function'\n      ? onMount(portalNode)\n      : portalNode\n\n    this.setState({\n      portalNode,\n      portalInstance\n    })\n  }\n\n  _updatePortal() {\n    let { id, className, style, onUpdate } = this.props\n\n    // Default props\n    onUpdate = onUpdate ||Â noop    \n\n    if (id) {\n      this._portalNode.id = id\n    }\n\n    if (className) {\n      this._portalNode.className = className\n    }\n\n    if (style) {\n      Object.keys(style).forEach(key => {\n        this._portalNode.style[key] = style[key]\n      })\n    }\n\n    if (typeof onUpdate === 'function') {\n      this._portalInstance = onUpdate(this._portalInstance)\n    }\n  }\n\n  _destroyPortal() {\n    this.state.portalNode.parentNode.removeChild(this._portalNode)\n    this.setState({\n      portalNode: null,\n      portalInstance: null\n    })\n  }\n\n  render() {\n\n    return this.state.portalNode ? createPortal(this._getComponent(), this.state.portalNode) : null;\n  }\n}\n\nexport default Travel"],"names":["Manager","props","_setTargetNode","node","_targetNode","_getTargetNode","popperManager","setTargetNode","getTargetNode","Tag","tag","children","restProps","createElement","Component","Target","context","component","innerRef","targetRef","targetProps","ref","componentProps","placements","PopperJS","defaultProps","placement","eventsEnabled","positionFixed","modifiers","Popper","enabled","order","fn","data","_isDataDirty","setState","_popperNode","_createPopper","_destroyPopper","popper","setArrowNode","_setArrowNode","bind","getArrowStyle","_getArrowStyle","lastProps","target","_popper","scheduleUpdate","_arrowNode","Error","Object","keys","offsets","map","key","state","JSON","stringify","_getOffsets","applyStyle","updateState","_updateStateModifier","arrow","element","setTimeout","_scheduleUpdate","destroy","position","pointerEvents","opacity","styles","undefined","hide","top","left","popperStyle","_getPopperStyle","popperPlacement","_getPopperPlacement","popperHide","_getPopperHide","popperProps","_handlePopperRef","style","Arrow","arrowRef","arrowStyle","arrowProps","isArray","Array","isNullOrUndef","o","isUndefined","isNull","ARR","Children","only","toArray","length","result","flatten","concat","noop","Travel","portalNode","portalInstance","_setupPortal","_updatePortal","_destroyPortal","renderTo","document","querySelector","body","useArray","renderTag","onMount","renderToNode","_getRenderToNode","appendChild","id","className","onUpdate","_portalNode","forEach","_portalInstance","parentNode","removeChild","createPortal","_getComponent"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAIMA;;;;;mBAESC,KAAb,EAAoB;;;;;iFACZA,KAAN;;UAEKC,cAAL,GAAsB,UAACC,IAAD,EAAU;YACzBC,WAAL,GAAmBD,IAAnB;KADF;;UAIKE,cAAL,GAAsB,YAAM;aACnB,MAAKD,WAAZ;KADF;;;;;;;sCAKgB;aACT;QACLE,aAAa,EAAE;UACbC,aAAa,EAAE,KAAKL,cADP;UAEbM,aAAa,EAAE,KAAKH;;OAHxB;;;;6BAQO;wBAKH,KAAKJ,KALF;UAEAQ,GAFA,eAELC,GAFK;UAGLC,QAHK,eAGLA,QAHK;UAIFC,SAJE;;UAOHH,GAAG,KAAK,KAAZ,EAAmB;eACVI,kCAAa,CAACJ,GAAG,IAAI,KAAR,EAAeG,SAAf,EAA0BD,QAA1B,CAApB;OADF,MAEO;eACEA,QAAP;;;;;;EAjCgBG;;ACDtB,IAAMC,MAAM,GAAG,SAATA,MAAS,CAACd,KAAD,EAAQe,OAAR,EAAoB;yBAC+Bf,KAD/B,CACzBgB,SADyB;MACzBA,SADyB,iCACb,KADa;MACNC,QADM,GAC+BjB,KAD/B,CACNiB,QADM;MACIP,QADJ,GAC+BV,KAD/B,CACIU,QADJ;MACiBC,SADjB,4BAC+BX,KAD/B;;MAEzBK,aAFyB,GAEPU,OAFO,CAEzBV,aAFyB;;MAG3Ba,SAAS,GAAG,SAAZA,SAAY,CAAAhB,IAAI,EAAI;IACxBG,aAAa,CAACC,aAAd,CAA4BJ,IAA5B;;QACI,OAAOe,QAAP,KAAoB,UAAxB,EAAoC;MAClCA,QAAQ,CAACf,IAAD,CAAR;;GAHJ;;MAOI,OAAOQ,QAAP,KAAoB,UAAxB,EAAoC;QAC5BS,WAAW,GAAG;MAAEC,GAAG,EAAEF;KAA3B;WACOR,QAAQ,CAAC;MAAES,WAAW,EAAXA,WAAF;MAAeR,SAAS,EAATA;KAAhB,CAAf;;;MAGIU,cAAc,qBACfV,SADe,CAApB;;MAII,OAAOK,SAAP,KAAqB,QAAzB,EAAmC;IACjCK,cAAc,CAACD,GAAf,GAAqBF,SAArB;GADF,MAEO;IACLG,cAAc,CAACJ,QAAf,GAA0BC,SAA1B;;;SAGKN,kCAAa,CAACI,SAAD,EAAYK,cAAZ,EAA4BX,QAA5B,CAApB;CAzBF;;ICCaY,UAAU,GAAGC,QAAQ,CAACD,UAA5B;AAEP,IAAME,YAAY,GAAG;EACnBR,SAAS,EAAE,KADQ;EAEnBS,SAAS,EAAE,QAFQ;EAGnBC,aAAa,EAAE,IAHI;EAInBC,aAAa,EAAE,KAJI;EAKnBC,SAAS,EAAE;CALb;;IAQMC;;;;;;;;;;;;;;;;;;oFAEI;;mGA+De;MACrBC,OAAO,EAAE,IADY;MAErBC,KAAK,EAAE,GAFc;MAGrBC,EAAE,EAAE,YAAAC,IAAI,EAAI;YACN,MAAKC,YAAL,CAAkBD,IAAlB,CAAJ,EAA6B;gBACtBE,QAAL,CAAc;YAAEF,IAAI,EAAJA;WAAhB;;;eAEKA,IAAP;;;;+FAsEe,UAAA/B,IAAI,EAAI;YACpBkC,WAAL,GAAmBlC,IAAnB;;UACIA,IAAJ,EAAU;cACHmC,aAAL;OADF,MAEO;cACAC,cAAL;;;UAEE,MAAKtC,KAAL,CAAWiB,QAAf,EAAyB;cAClBjB,KAAL,CAAWiB,QAAX,CAAoBf,IAApB;;;;;;;;;sCAlJc;aACT;QACLqC,MAAM,EAAE;UACNC,YAAY,EAAE,KAAKC,aAAL,CAAmBC,IAAnB,CAAwB,IAAxB,CADR;UAENC,aAAa,EAAE,KAAKC,cAAL,CAAoBF,IAApB,CAAyB,IAAzB;;OAHnB;;;;uCAQiBG,WAAW;UAE1BA,SAAS,CAACpB,SAAV,KAAwB,KAAKzB,KAAL,CAAWyB,SAAnC,IACAoB,SAAS,CAACnB,aAAV,KAA4B,KAAK1B,KAAL,CAAW0B,aADvC,IAEAmB,SAAS,CAACC,MAAV,KAAqB,KAAK9C,KAAL,CAAW8C,MAHlC,EAIE;aACKR,cAAL;;aACKD,aAAL;;;UAGEQ,SAAS,CAACnC,QAAV,KAAuB,KAAKV,KAAL,CAAWU,QAAtC,EAAgD;aACzCqC,OAAL,CAAaC,cAAb;;;;;2CAImB;WAChBV,cAAL;;;;kCAGapC,MAAM;WACd+C,UAAL,GAAkB/C,IAAlB;;;;qCAGgB;UACZ,KAAKF,KAAL,CAAW8C,MAAf,EAAuB;eACd,KAAK9C,KAAL,CAAW8C,MAAlB;OADF,MAEO,IACL,CAAC,KAAK/B,OAAL,CAAaV,aAAd,IACA,CAAC,KAAKU,OAAL,CAAaV,aAAb,CAA2BE,aAA3B,EAFI,EAGL;cACM,IAAI2C,KAAJ,CACJ,sFADI,CAAN;;;aAIK,KAAKnC,OAAL,CAAaV,aAAb,CAA2BE,aAA3B,EAAP;;;;gCAGW0B,MAAM;aACVkB,MAAM,CAACC,IAAP,CAAYnB,IAAI,CAACoB,OAAjB,EAA0BC,GAA1B,CAA8B,UAAAC,GAAG;eAAItB,IAAI,CAACoB,OAAL,CAAaE,GAAb,CAAJ;OAAjC,CAAP;;;;iCAGYtB,MAAM;UACd,KAAKuB,KAAL,CAAWvB,IAAf,EAAqB;eAEjBwB,IAAI,CAACC,SAAL,CAAe,KAAKC,WAAL,CAAiB,KAAKH,KAAL,CAAWvB,IAA5B,CAAf,MACAwB,IAAI,CAACC,SAAL,CAAe,KAAKC,WAAL,CAAiB1B,IAAjB,CAAf,CAFF;OADF,MAKO;eACE,IAAP;;;;;oCAea;;;wBACqC,KAAKjC,KAD1C;UACPyB,SADO,eACPA,SADO;UACIC,aADJ,eACIA,aADJ;UACmBC,aADnB,eACmBA,aADnB;;UAETC,SAAS,qBACV,KAAK5B,KAAL,CAAW4B,SADD;QAEbgC,UAAU,EAAE;UAAE9B,OAAO,EAAE;SAFV;QAGb+B,WAAW,EAAE,KAAKC;QAHpB;;UAMI,KAAKb,UAAT,EAAqB;QACnBrB,SAAS,CAACmC,KAAV,qBACM,KAAK/D,KAAL,CAAW4B,SAAX,CAAqBmC,KAArB,IAA8B,EADpC;UAEEC,OAAO,EAAE,KAAKf;;;;WAIbF,OAAL,GAAe,IAAIxB,QAAJ,CAAa,KAAKnB,cAAL,EAAb,EAAoC,KAAKgC,WAAzC,EAAsD;QACnEX,SAAS,EAATA,SADmE;QAEnEE,aAAa,EAAbA,aAFmE;QAGnED,aAAa,EAAbA,aAHmE;QAInEE,SAAS,EAATA;OAJa,CAAf,CAfe;;MAuBfqC,UAAU,CAAC;eAAM,MAAI,CAACC,eAAL,EAAN;OAAD,CAAV;;;;qCAGe;UACX,KAAKnB,OAAT,EAAkB;aACXA,OAAL,CAAaoB,OAAb;;;;;sCAIc;UACRlC,IADQ,GACC,KAAKuB,KADN,CACRvB,IADQ;;UAGZ,CAAC,KAAKc,OAAN,IAAiB,CAACd,IAAtB,EAA4B;eACnB;UACLmC,QAAQ,EAAE,UADL;UAELC,aAAa,EAAE,MAFV;UAGLC,OAAO,EAAE;SAHX;;;;QAQAF,QAAQ,EAAEnC,IAAI,CAACoB,OAAL,CAAad,MAAb,CAAoB6B;SAC3BnC,IAAI,CAACsC,MAFV;;;;0CAMoB;aACb,KAAKf,KAAL,CAAWvB,IAAX,GAAkB,KAAKuB,KAAL,CAAWvB,IAAX,CAAgBR,SAAlC,GAA8C+C,SAArD;;;;qCAGgB;aACT,CAAC,CAAC,KAAKhB,KAAL,CAAWvB,IAAb,IAAqB,KAAKuB,KAAL,CAAWvB,IAAX,CAAgBwC,IAArC,GAA4C,EAA5C,GAAiDD,SAAxD;;;;qCAGe;UACX,CAAC,KAAKhB,KAAL,CAAWvB,IAAZ,IAAoB,CAAC,KAAKuB,KAAL,CAAWvB,IAAX,CAAgBoB,OAAhB,CAAwBU,KAAjD,EAAwD;eAC/C,EAAP;OADF,MAEO;oCACiB,KAAKP,KAAL,CAAWvB,IAAX,CAAgBoB,OAAhB,CAAwBU,KADzC;YACGW,GADH,yBACGA,GADH;YACQC,IADR,yBACQA,IADR;eAEE;UAAED,GAAG,EAAHA,GAAF;UAAOC,IAAI,EAAJA;SAAd;;;;;sCAgBe;WACZ5B,OAAL,IAAgB,KAAKA,OAAL,CAAaC,cAAb,EAAhB;;;;6BAGO;yBAUH,KAAKhD,KAVF;UAELgB,SAFK,gBAELA,SAFK;UAGLC,QAHK,gBAGLA,QAHK;UAILQ,SAJK,gBAILA,SAJK;UAKLC,aALK,gBAKLA,aALK;UAMLC,aANK,gBAMLA,aANK;UAOLC,SAPK,gBAOLA,SAPK;UAQLlB,QARK,gBAQLA,QARK;UASFC,SATE;;;MAaPK,SAAS,GAAGA,SAAS,IAAI,KAAzB;MACAS,SAAS,GAAGA,SAAS,IAAI,QAAzB;AACAC,AACAE,MAAAA,SAAS,GAAGA,SAAS,IAAI,EAAzB;;UAEMgD,WAAW,GAAG,KAAKC,eAAL,EAApB;;UACMC,eAAe,GAAG,KAAKC,mBAAL,EAAxB;;UACMC,UAAU,GAAG,KAAKC,cAAL,EAAnB;;UAEI,OAAOvE,QAAP,KAAoB,UAAxB,EAAoC;YAC5BwE,WAAW,GAAG;UAClB9D,GAAG,EAAE,KAAK+D,gBADQ;UAElBC,KAAK,EAAER,WAFW;4BAGAE,eAHA;sCAIUE;SAJ9B;eAMOtE,QAAQ,CAAC;UACdwE,WAAW,EAAXA,WADc;UAEdvE,SAAS,EAATA,SAFc;UAGdqC,cAAc,EAAE,KAAKkB;SAHR,CAAf;;;UAOI7C,cAAc,qBACfV,SADe;QAElByE,KAAK,oBACAzE,SAAS,CAACyE,KADV,EAEAR,WAFA,CAFa;0BAMAE,eANA;oCAOUE;QAP9B;;UAUI,OAAOhE,SAAP,KAAqB,QAAzB,EAAmC;QACjCK,cAAc,CAACD,GAAf,GAAqB,KAAK+D,gBAA1B;OADF,MAEO;QACL9D,cAAc,CAACJ,QAAf,GAA0B,KAAKkE,gBAA/B;;;aAGKvE,kCAAa,CAACI,SAAD,EAAYK,cAAZ,EAA4BX,QAA5B,CAApB;;;;;EAlNiBG;;AAsNrBgB,MAAM,CAACL,YAAP,GAAsBA,YAAtB;;ACjOA,IAAM6D,KAAK,GAAG,SAARA,KAAQ,CAACrF,KAAD,EAAQe,OAAR,EAAoB;yBACiCf,KADjC,CACxBgB,SADwB;MACxBA,SADwB,iCACZ,MADY;MACJC,QADI,GACiCjB,KADjC,CACJiB,QADI;MACMP,QADN,GACiCV,KADjC,CACMU,QADN;MACmBC,SADnB,4BACiCX,KADjC;;MAExBuC,MAFwB,GAEbxB,OAFa,CAExBwB,MAFwB;;MAG1B+C,QAAQ,GAAG,SAAXA,QAAW,CAAApF,IAAI,EAAI;IACvBqC,MAAM,CAACC,YAAP,CAAoBtC,IAApB;;QACI,OAAOe,QAAP,KAAoB,UAAxB,EAAoC;MAClCA,QAAQ,CAACf,IAAD,CAAR;;GAHJ;;MAMMqF,UAAU,GAAGhD,MAAM,CAACI,aAAP,EAAnB;;MAEI,OAAOjC,QAAP,KAAoB,UAAxB,EAAoC;QAC5B8E,UAAU,GAAG;MACjBpE,GAAG,EAAEkE,QADY;MAEjBF,KAAK,EAAEG;KAFT;WAIO7E,QAAQ,CAAC;MAAE8E,UAAU,EAAVA,UAAF;MAAc7E,SAAS,EAATA;KAAf,CAAf;;;MAGIU,cAAc,qBACfV,SADe;IAElByE,KAAK,oBACAG,UADA,EAEA5E,SAAS,CAACyE,KAFV;IAFP;;MAQI,OAAOpE,SAAP,KAAqB,QAAzB,EAAmC;IACjCK,cAAc,CAACD,GAAf,GAAqBkE,QAArB;GADF,MAEO;IACLjE,cAAc,CAACJ,QAAf,GAA0BqE,QAA1B;;;SAGK1E,kCAAa,CAACI,SAAD,EAAYK,cAAZ,EAA4BX,QAA5B,CAApB;CAjCF;;ACFA,IAAI+E,OAAO,GAAGC,KAAK,CAACD,OAApB;;AAKA,SAASE,aAAT,CAAuBC,CAAvB,EAA0B;SACfC,WAAW,CAACD,CAAD,CAAX,IAAkBE,MAAM,CAACF,CAAD,CAA/B;;;AAcJ,SAASE,MAAT,CAAgBF,CAAhB,EAAmB;SACRA,CAAC,KAAK,IAAb;;;AAKJ,SAASC,WAAT,CAAqBD,CAArB,EAAwB;SACbA,CAAC,KAAK,KAAK,CAAlB;;;ACvBJ;;AACA,IAAMG,GAAG,GAAG,EAAZ;AAEA,AAAO,IAAMC,QAAQ,GAAG;EACtBC,IAAI,EAAE,cAAUvF,QAAV,EAAoB;IACxBA,QAAQ,GAAGsF,QAAQ,CAACE,OAAT,CAAiBxF,QAAjB,CAAX;;QACIA,QAAQ,CAACyF,MAAT,KAAoB,CAAxB,EAA2B;YACnB,IAAIjD,KAAJ,CAAU,yCAAV,CAAN;;;WAEKxC,QAAQ,CAAC,CAAD,CAAf;GANoB;EAStBwF,OAAO,EAAE,iBAAUxF,QAAV,EAAoB;QACvBiF,aAAa,CAACjF,QAAD,CAAjB,EAA6B;aACpB,EAAP;KAFyB;;;;QAMvB+E,OAAO,CAAC/E,QAAD,CAAX,EAAuB;UACf0F,MAAM,GAAG,EAAf;MAEAC,OAAO,CAAC3F,QAAD,EAAW0F,MAAX,CAAP;aAEOA,MAAP;;;WAEKL,GAAG,CAACO,MAAJ,CAAW5F,QAAX,CAAP;;CAtBG;;;ACLP,IAAM6F,IAAI,GAAG,SAAPA,IAAO;SAAM,IAAN;CAAb;;IAEMC;;;;;kBAEQxG,KAAZ,EAAmB;;;;;gFACXA,KAAN;UAEKwD,KAAL,GAAa;MACXiD,UAAU,EAAE,IADD;MAEXC,cAAc,EAAE;KAFlB;;;;;;wCAMkB;WACbC,YAAL;;;;yCAGmB;WACdC,aAAL;;;;2CAGqB;WAChBC,cAAL;;;;uCAGiB;UACTC,QADS,GACI,KAAK9G,KADT,CACT8G,QADS;;UAEb,OAAOA,QAAP,KAAoB,QAAxB,EAAkC;eACzBC,QAAQ,CAACC,aAAT,CAAuBF,QAAvB,CAAP;OADF,MAEO;eACEA,QAAQ,IAAIC,QAAQ,CAACE,IAA5B;;;;;oCAIY;UACV,KAAKjH,KAAL,CAAWkH,QAAf,EAAyB;eAChBlB,QAAQ,CAACE,OAAT,CAAiB,KAAKlG,KAAL,CAAWU,QAA5B,EAAsC,CAAtC,CAAP;OADF,MAEO;eACEsF,QAAQ,CAACC,IAAT,CAAc,KAAKjG,KAAL,CAAWU,QAAzB,CAAP;;;;;mCAIW;wBACgB,KAAKV,KADrB;UACPmH,SADO,eACPA,SADO;UACIC,OADJ,eACIA,OADJ;;MAIbD,SAAS,GAAGA,SAAS,IAAI,KAAzB;MACAC,OAAO,GAAGA,OAAO,IAAIb,IAArB;;UAEMc,YAAY,GAAG,KAAKC,gBAAL,EAArB,CAPa;;;UAUPb,UAAU,GAAGM,QAAQ,CAACnG,aAAT,CAAuBuG,SAAvB,CAAnB,CAVa;;MAabE,YAAY,CAACE,WAAb,CAAyBd,UAAzB,EAba;;UAgBPC,cAAc,GAAG,OAAOU,OAAP,KAAmB,UAAnB,GACnBA,OAAO,CAACX,UAAD,CADY,GAEnBA,UAFJ;WAIKtE,QAAL,CAAc;QACZsE,UAAU,EAAVA,UADY;QAEZC,cAAc,EAAdA;OAFF;;;;oCAMc;;;yBAC2B,KAAK1G,KADhC;UACRwH,EADQ,gBACRA,EADQ;UACJC,SADI,gBACJA,SADI;UACOrC,KADP,gBACOA,KADP;UACcsC,QADd,gBACcA,QADd;;MAIdA,QAAQ,GAAGA,QAAQ,IAAInB,IAAvB;;UAEIiB,EAAJ,EAAQ;aACDG,WAAL,CAAiBH,EAAjB,GAAsBA,EAAtB;;;UAGEC,SAAJ,EAAe;aACRE,WAAL,CAAiBF,SAAjB,GAA6BA,SAA7B;;;UAGErC,KAAJ,EAAW;QACTjC,MAAM,CAACC,IAAP,CAAYgC,KAAZ,EAAmBwC,OAAnB,CAA2B,UAAArE,GAAG,EAAI;UAChC,MAAI,CAACoE,WAAL,CAAiBvC,KAAjB,CAAuB7B,GAAvB,IAA8B6B,KAAK,CAAC7B,GAAD,CAAnC;SADF;;;UAKE,OAAOmE,QAAP,KAAoB,UAAxB,EAAoC;aAC7BG,eAAL,GAAuBH,QAAQ,CAAC,KAAKG,eAAN,CAA/B;;;;;qCAIa;WACVrE,KAAL,CAAWiD,UAAX,CAAsBqB,UAAtB,CAAiCC,WAAjC,CAA6C,KAAKJ,WAAlD;WACKxF,QAAL,CAAc;QACZsE,UAAU,EAAE,IADA;QAEZC,cAAc,EAAE;OAFlB;;;;6BAMO;aAEA,KAAKlD,KAAL,CAAWiD,UAAX,GAAwBuB,oBAAY,CAAC,KAAKC,aAAL,EAAD,EAAuB,KAAKzE,KAAL,CAAWiD,UAAlC,CAApC,GAAoF,IAA3F;;;;;EArGiB5F;;;;;;;;;"}